{% extends "base.html" %}
{% set active_page = "CA: Spline" %}

{% block title %}{% endblock %}

{% block head %}

{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <h1>Hello, this is a demo.</h1>
    </div>
    <div class="row align-items-start justify-content-end">
        <div class="col-5">
            <div class="col-sm-12 col-md-10 col-lg-8 col-xl-6 mt-5">
                <div class="card bg-light" style="z-index: 2;">
                    <h4 class="card-header">
                        设置
                    </h4>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            自动绘制曲线
                            <div class="material-switch float-right">
                                <input id="autodraw" name="autodraw" type="checkbox" checked/>
                                <label for="autodraw" class="bg-success">
                                </label>
                            </div>
                        </li>
                        <li class="list-group-item">
                            显示曲线点
                            <div class="material-switch float-right">
                                <input id="showdots" name="showdots" type="checkbox" checked/>
                                <label for="showdots" class="bg-info">
                                </label>
                            </div>
                        </li>
                        <li class="list-group-item">
                            分段数
                            <div id="grainslider" class="col-11 mt-2">
                                <div id="grainhandle" class="ui-slider-handle"></div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            张力值
                            <div id="tensionslider" class="col-11 mt-2">
                                <div id="tensionhandle" class="ui-slider-handle"></div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            控制点大小
                            <div id="dotsizeslider" class="col-11 mt-2">
                                <div id="dotsizehandle" class="ui-slider-handle"></div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            曲线宽度
                            <div id="linewidthslider" class="col-11 mt-2">
                                <div id="linewidthhandle" class="ui-slider-handle"></div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            补帧密度
                            <div id="frameslider" class="col-11 mt-2">
                                <div id="framehandle" class="ui-slider-handle"></div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-2" id="splinediv">
            <canvas id="splinecanvas" width="1200" height="800" style="border: 1px solid #000000;position: relative;
        left: 50%;transform: translate(-50%);margin-top:10px">
                <h1>HTML5 Canvas is not supported in your browser!</h1>
            </canvas>
        </div>
        <div class="col-4 ml-auto align-self-end">
            <div class="col-12 mb-3">
                <div class="card" id="choose-type" hidden>
                    <h4 class="card-header">
                        选择一种插补中间帧的方式
                    </h4>
                    <div class="card-body">
                        <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane fade show active" id="norm-type-1" role="tabpanel" aria-labelledby="norm-type-1-tab">
                                <img class="card-img" src="{{ url_for('static', filename='images/velocity_line_1.png') }}" alt="Velocity Graph 1">
                            </div>
                            <div class="tab-pane fade" id="norm-type-2" role="tabpanel" aria-labelledby="norm-type-2-tab">线性·加速</div>
                            <div class="tab-pane fade" id="norm-type-3" role="tabpanel" aria-labelledby="norm-type-3-tab">非线性·加速</div>
                            <div class="tab-pane fade" id="norm-type-4" role="tabpanel" aria-labelledby="norm-type-4-tab">非线性·加速再减速</div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <ul class="nav nav-pills" id="pills-tab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="norm-type-1-tab" data-toggle="pill" href="#norm-type-1" role="tab" aria-controls="norm-type-1" aria-expanded="true">线性·匀速</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="norm-type-2-tab" data-toggle="pill" href="#norm-type-2" role="tab" aria-controls="norm-type-2" aria-expanded="true">线性·加速</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="norm-type-3-tab" data-toggle="pill" href="#norm-type-3" role="tab" aria-controls="norm-type-3" aria-expanded="true">非线性·加速</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="norm-type-4-tab" data-toggle="pill" href="#norm-type-4" role="tab" aria-controls="norm-type-4" aria-expanded="true">非线性·加速再减速</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--<div class="col-12 col-xl-9 mb-3">-->
                <!--<div class="card bg-light" style="z-index: 10;">-->
                    <!--<div class="card-header">-->
                        <!--Notes-->
                    <!--</div>-->
                    <!--<div class="card-body">-->
                        <!--<h4 class="card-title">How to use</h4>-->
                        <!--<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
            <div class="col-6 mb-3 ml-auto mr-auto" id="control-panel" hidden>
                <div class="btn-group mt-1" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-success" id="pause-restore">暂停</button>
                    <button type="button" class="btn btn-success" id="step" disabled>步进</button>
                    <button type="button" class="btn btn-success" id="stop">停止</button>
                </div>
            </div>
            <div class="col-12 mb-3">
                <button type="button" class="btn btn-primary mt-1" id="draw">绘制曲线</button>
                <button type="button" class="btn btn-info mt-1" id="normalize" disabled>统一插值</button>
                <!--<div class="btn-group" role="group">-->
                    <!--<button id="normalize" type="button" class="btn btn-info dropdown-toggle mt-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" disabled>-->
                        <!--统一插值-->
                    <!--</button>-->
                    <!--<div class="dropdown-menu" aria-labelledby="btnGroupDrop1">-->
                        <!--<a class="dropdown-item" href="javascript:void(0);" onclick="normalizeSpline(NORMALIZE_METHOD_TYPE_1);">线性插值（匀速）</a>-->
                        <!--<a class="dropdown-item" href="javascript:void(0);" onclick="normalizeSpline(NORMALIZE_METHOD_TYPE_2);">线性插值（加速）</a>-->
                        <!--<a class="dropdown-item" href="javascript:void(0);" onclick="normalizeSpline(NORMALIZE_METHOD_TYPE_3);">非线性插值（加速）</a>-->
                    <!--</div>-->
                <!--</div>-->
                <button type="button" class="btn btn-success mt-1" id="play" disabled>开始运动</button>
                <div class="btn-group" role="group">
                    <button id="clear" type="button" class="btn btn-danger dropdown-toggle mt-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        清除元素
                    </button>
                    <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                        <a class="dropdown-item" href="javascript:void(0);" onclick="popControlPoint();">撤销</a>
                        <a class="dropdown-item" href="javascript:void(0);" onclick="clearCanvas();">清空画布</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <p id="spline-message" class="spline-message">Messages will be shown here.</p>
    </div>
</div>
{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{{ url_for('static', filename='jcanvas.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='model.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='view.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='spline.js') }}"></script>
<script>
    let spline = new Spline();
</script>
{% endblock %}